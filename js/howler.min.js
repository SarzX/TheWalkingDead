/*!
 *  howler.js v1.1.5
 *  howlerjs.com
 *
 *  (c) 2013, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
!function(){var e={},o=null,n=!0,r=!1;if("undefined"!=typeof AudioContext?o=new AudioContext:"undefined"!=typeof webkitAudioContext?o=new webkitAudioContext:"undefined"!=typeof Audio?n=!1:(n=!1,r=!0),n){var u=void 0===o.createGain?o.createGainNode():o.createGain();u.gain.value=1,u.connect(o.destination)}var a=function(){this._volume=1,this._muted=!1,this.usingWebAudio=n,this._howls=[]};a.prototype={volume:function(e){var o=this;if((e=parseFloat(e))&&e>=0&&1>=e){for(var r in o._volume=e,n&&(u.gain.value=e),o._howls)if(o._howls.hasOwnProperty(r)&&!1===o._howls[r]._webAudio)for(var a=0;a<o._howls[r]._audioNode.length;a++)o._howls[r]._audioNode[a].volume=o._howls[r]._volume*o._volume;return o}return n?u.gain.value:o._volume},mute:function(){var e=this;for(var o in e._muted=!0,n&&(u.gain.value=0),e._howls)if(e._howls.hasOwnProperty(o)&&!1===e._howls[o]._webAudio)for(var r=0;r<e._howls[o]._audioNode.length;r++)e._howls[o]._audioNode[r].muted=!0;return e},unmute:function(){var e=this;for(var o in e._muted=!1,n&&(u.gain.value=e._volume),e._howls)if(e._howls.hasOwnProperty(o)&&!1===e._howls[o]._webAudio)for(var r=0;r<e._howls[o]._audioNode.length;r++)e._howls[o]._audioNode[r].muted=!1;return e}};var t=new a,i=null;if(!r)var d={mp3:!!(i=new Audio).canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),webm:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")};var l=function(e){var o=this;o._autoplay=e.autoplay||!1,o._buffer=e.buffer||!1,o._duration=e.duration||0,o._format=e.format||null,o._loop=e.loop||!1,o._loaded=!1,o._sprite=e.sprite||{},o._src=e.src||"",o._pos3d=e.pos3d||[0,0,-.5],o._volume=e.volume||1,o._urls=e.urls||[],o._onload=[e.onload||function(){}],o._onloaderror=[e.onloaderror||function(){}],o._onend=[e.onend||function(){}],o._onpause=[e.onpause||function(){}],o._onplay=[e.onplay||function(){}],o._onendTimer=[],o._webAudio=n&&!o._buffer,o._audioNode=[],o._webAudio&&o._setupAudioNode(),t._howls.push(o),o.load()};if(l.prototype={load:function(){var o=this,n=null;if(r)o.on("loaderror");else{for(var u={mp3:d.mp3,opus:d.opus,ogg:d.ogg,wav:d.wav,m4a:d.m4a,weba:d.webm},a=0;a<o._urls.length;a++){var i;if(o._format?i=o._format:i=(i=o._urls[a].toLowerCase().match(/.+\.([^?]+)(\?|$)/))&&i.length>=2?i[1]:o._urls[a].toLowerCase().match(/data\:audio\/([^?]+);/)[1],u[i]){n=o._urls[a];break}}if(n){if(o._src=n,o._webAudio)_(o,n);else{var l=new Audio;o._audioNode.push(l),l.src=n,l._pos=0,l.preload="auto",l.volume=t._muted?0:o._volume*t.volume(),e[n]=o;var f=function(){o._duration=l.duration,0===Object.getOwnPropertyNames(o._sprite).length&&(o._sprite={_default:[0,1e3*o._duration]}),o._loaded||(o._loaded=!0,o.on("load")),o._autoplay&&o.play(),l.removeEventListener("canplaythrough",f,!1)};l.addEventListener("canplaythrough",f,!1),l.load()}return o}o.on("loaderror")}},urls:function(e){var o=this;return e?(o._urls=e,o._loaded=!1,o.stop(),o.load(),o):o._urls},play:function(e,n){var r=this;return e||(e="_default"),r._loaded?r._sprite[e]?(r._inactiveNode((function(u){u._sprite=e;var a,i=u._pos>0?u._pos:r._sprite[e][0]/1e3,d=r._sprite[e][1]/1e3-u._pos,l=!(!r._loop&&!r._sprite[e][2]),_="string"==typeof n?n:Math.round(Date.now()*Math.random())+"";if(function(){var o={id:_,sprite:e,loop:l};a=setTimeout((function(){!r._webAudio&&l&&r.stop(o.id,o.timer).play(e,o.id),r._webAudio&&!l&&(r._nodeById(o.id).paused=!0),r._webAudio||l||r.stop(o.id,o.timer),r.on("end",_)}),1e3*d),r._onendTimer.push(a),o.timer=r._onendTimer[r._onendTimer.length-1]}(),r._webAudio)u.id=_,u.paused=!1,s(r,[l,i,d],_),r._playStart=o.currentTime,u.gain.value=r._volume,void 0===u.bufferSource.start?u.bufferSource.noteGrainOn(0,i,d):u.bufferSource.start(0,i,d);else{if(4!==u.readyState)return r._clearEndTimer(a),function(){var o=r,a=e,t=n,i=u,d=function(){o.play(a,t),i.removeEventListener("canplaythrough",d,!1)};i.addEventListener("canplaythrough",d,!1)}(),r;u.id=_,u.currentTime=i,u.muted=t._muted,u.volume=r._volume*t.volume(),u.play()}return r.on("play"),"function"==typeof n&&n(_),r})),r):("function"==typeof n&&n(),r):(r.on("load",(function(){r.play(e,n)})),r)},pause:function(e,n){var r=this;if(!r._loaded)return r.on("play",(function(){r.pause(e)})),r;r._clearEndTimer(n||0);var u=e?r._nodeById(e):r._activeNode();if(u)if(r._webAudio){if(!u.bufferSource)return r;u.paused=!0,u._pos+=o.currentTime-r._playStart,void 0===u.bufferSource.stop?u.bufferSource.noteOff(0):u.bufferSource.stop(0)}else u._pos=u.currentTime,u.pause();return r.on("pause"),r},stop:function(e,o){var n=this;if(!n._loaded)return n.on("play",(function(){n.stop(e)})),n;n._clearEndTimer(o||0);var r=e?n._nodeById(e):n._activeNode();if(r)if(r._pos=0,n._webAudio){if(!r.bufferSource)return n;r.paused=!0,void 0===r.bufferSource.stop?r.bufferSource.noteOff(0):r.bufferSource.stop(0)}else r.pause(),r.currentTime=0;return n},mute:function(e){var o=this;if(!o._loaded)return o.on("play",(function(){o.mute(e)})),o;var n=e?o._nodeById(e):o._activeNode();return n&&(o._webAudio?n.gain.value=0:n.volume=0),o},unmute:function(e){var o=this;if(!o._loaded)return o.on("play",(function(){o.unmute(e)})),o;var n=e?o._nodeById(e):o._activeNode();return n&&(o._webAudio?n.gain.value=o._volume:n.volume=o._volume),o},volume:function(e,o){var n=this;if(e=parseFloat(e),!n._loaded)return n.on("play",(function(){n.volume(e,o)})),n;if(e>=0&&1>=e){n._volume=e;var r=o?n._nodeById(o):n._activeNode();return r&&(n._webAudio?r.gain.value=e:r.volume=e*t.volume()),n}return n._volume},loop:function(e){var o=this;return"boolean"==typeof e?(o._loop=e,o):o._loop},sprite:function(e){var o=this;return"object"==typeof e?(o._sprite=e,o):o._sprite},pos:function(e,n){var r=this;if(!r._loaded)return r.on("load",(function(){r.pos(e)})),r;var u=n?r._nodeById(n):r._activeNode();return u?r._webAudio?e>=0?(u._pos=e,r.pause(n).play(u._sprite,n),r):u._pos+(o.currentTime-r._playStart):e>=0?(u.currentTime=e,r):u.currentTime:void 0},pos3d:function(e,o,n,r){var u=this;if(o=void 0!==o&&o?o:0,n=void 0!==n&&n?n:-.5,!u._loaded)return u.on("play",(function(){u.pos3d(e,o,n,r)})),u;if(!(e>=0||0>e))return u._pos3d;if(u._webAudio){var a=r?u._nodeById(r):u._activeNode();a&&(u._pos3d=[e,o,n],a.panner.setPosition(e,o,n))}return u},fadeIn:function(e,o,n){var r=this,u=e/.01,a=o/u;if(!r._loaded)return r.on("load",(function(){r.fadeIn(e,o,n)})),r;r.volume(0).play();for(var t=1;u>=t;t++)!function(){var o=Math.round(1e3*(r._volume+.01*t))/1e3,u=e;setTimeout((function(){r.volume(o),o===u&&n&&n()}),a*t)}();return r},fadeOut:function(e,o,n,r){var u=this,a=(u._volume-e)/.01,t=o/a;if(!u._loaded)return u.on("play",(function(){u.fadeOut(e,o,n,r)})),u;for(var i=1;a>=i;i++)!function(){var o=Math.round(1e3*(u._volume-.01*i))/1e3,a=e;setTimeout((function(){u.volume(o,r),o===a&&(n&&n(),u.pause(r),u.on("end"))}),t*i)}();return u},_nodeById:function(e){for(var o=this,n=o._audioNode[0],r=0;r<o._audioNode.length;r++)if(o._audioNode[r].id===e){n=o._audioNode[r];break}return n},_activeNode:function(){for(var e=this,o=null,n=0;n<e._audioNode.length;n++)if(!e._audioNode[n].paused){o=e._audioNode[n];break}return e._drainPool(),o},_inactiveNode:function(e){for(var o=this,n=null,r=0;r<o._audioNode.length;r++)if(o._audioNode[r].paused&&4===o._audioNode[r].readyState){e(o._audioNode[r]),n=!0;break}var u;(o._drainPool(),n)||(o._webAudio?(u=o._setupAudioNode(),e(u)):(o.load(),(u=o._audioNode[o._audioNode.length-1]).addEventListener("loadedmetadata",(function(){e(u)}))))},_drainPool:function(){var e,o=this,n=0;for(e=0;e<o._audioNode.length;e++)o._audioNode[e].paused&&n++;for(e=o._audioNode.length-1;e>=0&&!(5>=n);e--)o._audioNode[e].paused&&(n--,o._audioNode.splice(e,1))},_clearEndTimer:function(e){var o=this,n=o._onendTimer.indexOf(e);n=n>=0?n:0,o._onendTimer[n]&&(clearTimeout(o._onendTimer[n]),o._onendTimer.splice(n,1))},_setupAudioNode:function(){var e=this,n=e._audioNode,r=e._audioNode.length;return n[r]=void 0===o.createGain?o.createGainNode():o.createGain(),n[r].gain.value=e._volume,n[r].paused=!0,n[r]._pos=0,n[r].readyState=4,n[r].connect(u),n[r].panner=o.createPanner(),n[r].panner.setPosition(e._pos3d[0],e._pos3d[1],e._pos3d[2]),n[r].panner.connect(n[r]),n[r]},on:function(e,o){var n=this,r=n["_on"+e];if("function"==typeof o)r.push(o);else for(var u=0;u<r.length;u++)o?r[u].call(n,o):r[u].call(n);return n},off:function(e,o){for(var n=this["_on"+e],r=""+o,u=0;u<n.length;u++)if(r===""+n[u]){n.splice(u,1);break}return this}},n)var _=function(n,r){if(r in e)n._duration=e[r].duration,f(n);else{var u=new XMLHttpRequest;u.open("GET",r,!0),u.responseType="arraybuffer",u.onload=function(){o.decodeAudioData(u.response,(function(o){o&&(e[r]=o,f(n,o))}))},u.onerror=function(){n._webAudio&&(n._buffer=!0,n._webAudio=!1,n._audioNode=[],delete n._gainNode,n.load())};try{u.send()}catch(e){u.onerror()}}},f=function(e,o){e._duration=o?o.duration:e._duration,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play()},s=function(n,r,u){var a=n._nodeById(u);a.bufferSource=o.createBufferSource(),a.bufferSource.buffer=e[n._src],a.bufferSource.connect(a.panner),a.bufferSource.loop=r[0],r[0]&&(a.bufferSource.loopStart=r[1],a.bufferSource.loopEnd=r[1]+r[2])};"function"==typeof define&&define.amd?define("Howler",(function(){return{Howler:t,Howl:l}})):(window.Howler=t,window.Howl=l)}();
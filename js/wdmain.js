let filePath="";filePath=(window.location.href.includes("localhost"),"/app/themes/coolwhip-child");var tem,loadwalkTimer,preload,N=navigator.appName,ua=navigator.userAgent,M=ua.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);function animatedPNG(e,a,s,i,t,r,n){var d=0,g=i/s,o=$("#"+e);a=setInterval((function(){null==n&&(n=!0),t?o.css("background-position","0px -"+d*s+"px"):o.css("background-position","-"+d*s+"px 0px"),++d>=g&&(n?d=0:clearInterval(a))}),r)}M&&null!=(tem=ua.match(/version\/([\.\d]+)/i))&&(M[2]=tem[1]),M=M?[M[1],M[2]]:[N,navigator.appVersion,"-?"],console.log("Browser: "+M[0]+" "+M[1]),animatedPNG("loadwalk",loadwalkTimer,175,1225,!0,130);var wdSounds,mothsTimer,firefliesTimer,loadallfired=!1,manifest=new Array,wdImgs=["/dist/images/pages/generic/features/walking-dead/titleScreen.jpg","/dist/images/pages/generic/features/walking-dead/scrollDown.jpg","/dist/images/pages/generic/features/walking-dead/americanFlag.gif","/dist/images/pages/generic/features/walking-dead/bgP1.jpg","/dist/images/pages/generic/features/walking-dead/bgP2.jpg","/dist/images/pages/generic/features/walking-dead/bgP3.jpg","/dist/images/pages/generic/features/walking-dead/bgP4.jpg","/dist/images/pages/generic/features/walking-dead/bgP5.jpg","/dist/images/pages/generic/features/walking-dead/bgP6.jpg","/dist/images/pages/generic/features/walking-dead/bgP7.jpg","/dist/images/pages/generic/features/walking-dead/bgP8.jpg","/dist/images/pages/generic/features/walking-dead/bgP9.jpg","/dist/images/pages/generic/features/walking-dead/bgP10.jpg","/dist/images/pages/generic/features/walking-dead/bloodSplatter.png","/dist/images/pages/generic/features/walking-dead/carSign.png","/dist/images/pages/generic/features/walking-dead/catCrow.gif","/dist/images/pages/generic/features/walking-dead/clouds_first.png","/dist/images/pages/generic/features/walking-dead/clouds_large.png","/dist/images/pages/generic/features/walking-dead/darylTree.png","/dist/images/pages/generic/features/walking-dead/dontOpenDeadInside.png","/dist/images/pages/generic/features/walking-dead/EndFrame1.png","/dist/images/pages/generic/features/walking-dead/EndFrame2.png","/dist/images/pages/generic/features/walking-dead/EndFrame3.png","/dist/images/pages/generic/features/walking-dead/EndFrame4.png","/dist/images/pages/generic/features/walking-dead/EndFrameBg.jpg","/dist/images/pages/generic/features/walking-dead/endScene.jpg","/dist/images/pages/generic/features/walking-dead/ez1.png","/dist/images/pages/generic/features/walking-dead/ez2.png","/dist/images/pages/generic/features/walking-dead/ez3.png","/dist/images/pages/generic/features/walking-dead/ez4.png","/dist/images/pages/generic/features/walking-dead/ez5.png","/dist/images/pages/generic/features/walking-dead/fadeOut.png","/dist/images/pages/generic/features/walking-dead/fireflies.png","/dist/images/pages/generic/features/walking-dead/flagPole.png","/dist/images/pages/generic/features/walking-dead/fog1.png","/dist/images/pages/generic/features/walking-dead/grungeRepeat.png","/dist/images/pages/generic/features/walking-dead/light.png","/dist/images/pages/generic/features/walking-dead/makeUp.png","/dist/images/pages/generic/features/walking-dead/mid_bottom.jpg","/dist/images/pages/generic/features/walking-dead/mid_top.png","/dist/images/pages/generic/features/walking-dead/moths.png","/dist/images/pages/generic/features/walking-dead/nicotero.png","/dist/images/pages/generic/features/walking-dead/obstacleCourse.png","/dist/images/pages/generic/features/walking-dead/powerline.png","/dist/images/pages/generic/features/walking-dead/prosthetics.png","/dist/images/pages/generic/features/walking-dead/rick1.png","/dist/images/pages/generic/features/walking-dead/rick2.png","/dist/images/pages/generic/features/walking-dead/road.png","/dist/images/pages/generic/features/walking-dead/school_over.png","/dist/images/pages/generic/features/walking-dead/school_under.png","/dist/images/pages/generic/features/walking-dead/sf_glint1.png","/dist/images/pages/generic/features/walking-dead/sf_glint2.png","/dist/images/pages/generic/features/walking-dead/sf_glint3.png","/dist/images/pages/generic/features/walking-dead/sf_glint4.png","/dist/images/pages/generic/features/walking-dead/Sun_flare.png","/dist/images/pages/generic/features/walking-dead/Sun.png","/dist/images/pages/generic/features/walking-dead/talkBubble_move.png","/dist/images/pages/generic/features/walking-dead/talkBubble_static.png","/dist/images/pages/generic/features/walking-dead/thoughtBubble_move.png","/dist/images/pages/generic/features/walking-dead/tire.png","/dist/images/pages/generic/features/walking-dead/tree1.png","/dist/images/pages/generic/features/walking-dead/tree2.png","/dist/images/pages/generic/features/walking-dead/wardrobe.png","/dist/images/pages/generic/features/walking-dead/warehouse_door.png","/dist/images/pages/generic/features/walking-dead/warehouse_over.png","/dist/images/pages/generic/features/walking-dead/warehouse.png","/dist/images/pages/generic/features/walking-dead/WCS_All.png","/dist/images/pages/generic/features/walking-dead/zomDeath.png","/dist/images/pages/generic/features/walking-dead/zomDeath_daryl.png"];function initPreloader(){reload(),loadAll()}function reload(){null!=preload&&preload.close(),(preload=new createjs.LoadQueue(!1)).installPlugin(createjs.Sound),preload.addEventListener("error",handleFileError),preload.addEventListener("progress",handleOverallProgress),preload.setMaxConnections(5),manifest=(manifest=wdImgs.concat(wdSounds)).map((e=>filePath+e))}function loadAll(){for(;manifest.length>0;)loadAnother()}function loadAnother(){var e=manifest.shift();preload.loadFile(e)}function handleOverallProgress(e){var a=Math.round(1e3*preload.progress)/10;if($("#loadsprite img").css("top",-3.12*a+"px"),1==preload.progress){clearInterval(loadwalkTimer),mainTheme.play(),mainThemePlaying=!0;skrollr.init({smoothScrolling:!0,constants:{startwalk:sw,startparallax:sp,changeschool:cs,prostheticspause:pp,prostheticsresume:pr,makeuppause:mp,makeupresume:mr,wardrobe:wd,bloodsplatterpause:bp,bloodsplatterresume:br,startslowparallax:ss,endparallax:ep,endscene1:e1,endscene2:e2,endscene3:e3,endscene4:e4,gunfire:gf,zombiesmove:zm,zombieblackout:zb},easing:{vibrate:function(e){return Math.sin(10*e*Math.PI)}},render:function(e){currST=$(window).scrollTop(),$("#theScroll").html(currST),currST<cs?(animationCycle=6,walkPace=28):(animationCycle=3,walkPace=14),currST>=ss&&(walkPace=40),isPaused=currST>=pp&&currST<=pr||currST>=bp-150&&currST<=br,currST>lastST+walkPace&&!isPaused?(zombie.css("left",pixelLocations[nextSprite]+"px"),lastST=currST,(nextSprite+=1)>=animationCycle+1&&(nextSprite=0),(prevSprite+=1)>=animationCycle+1&&(prevSprite=0)):currST<lastST-walkPace&&!isPaused&&(zombie.css("left",pixelLocations[prevSprite]+"px"),lastST=$(window).scrollTop(),(nextSprite-=1)<=-1&&(nextSprite=animationCycle),(prevSprite-=1)<=-1&&(prevSprite=animationCycle)),triggerSound("schoolbell",cs-10,100),triggerSound("glassbreak",cs+100,100),triggerSound("barrelroll",cs+1050,60),triggerSound("cartsqueak",cs+1680,60),triggerSound("crowcawed2",cs+1860,60),triggerSound("crowcawed1",cs+2200,60),triggerSound("garagedoor",pp-800,70),triggerSound("garagedoor2",pr+60,60),triggerSound("powderhits1",pp+20,60),triggerSound("powderhits2",pp+230,60),triggerSound("makeupsqk1",mp+40,60),triggerSound("powderhits3",mp+180,60),triggerSound("powderhits4",mp+400,60),triggerSound("makeupsqk2",mr-70,60),triggerSound("makeupsqk3",mr+150,60),triggerSound("hangerrack",wd-160,60),triggerSound("bloodsplt1",bp+140,60),triggerSound("bloodsplt2",bp+220,60),triggerSound("bloodsplt3",bp+320,60),triggerSound("owlhoot",br+1700,350),triggerSound("gunclicked",ss+220,40),altEnd?triggerSound("crossbowfx",gf-150,80):triggerSound("gunfire",gf-170,40),triggerSound("bodyhit",gf+450,60),fadeLoop(loopCrickets,br+1800,1500),currST>e1-550&&!cutSceneTriggered&&(mainTheme.stop(),mainThemePlaying=!1,endThemePlaying=!0,$.scrollTo("24900px",16e3,{onAfter:function(){$("#pi10").css({display:"block"})}}),cutSceneTriggered=!0,endTheme1.play()),currST>e1-650&&mainTheme.stop()}});setTimeout((function(){$("#loading").fadeOut("slow")}),500)}}function handleFileError(e){console.log("error loading asset")}wdSounds="Firefox"==M[0]||"Opera"==M[0]?["/feature-assets/walking-dead/sounds/Crickets.ogg","/feature-assets/walking-dead/sounds/EndTheme1.ogg","/feature-assets/walking-dead/sounds/EndTheme2.ogg","/feature-assets/walking-dead/sounds/MainTheme.ogg","/feature-assets/walking-dead/sounds/SpriteClip.ogg"]:["/feature-assets/walking-dead/sounds/Crickets.mp3","/feature-assets/walking-dead/sounds/EndTheme1.mp3","/feature-assets/walking-dead/sounds/EndTheme2.mp3","/feature-assets/walking-dead/sounds/MainTheme.mp3","/feature-assets/walking-dead/sounds/SpriteClip.mp3"],animatedPNG("moths",mothsTimer,100,6300,!0,35),animatedPNG("fireflies",firefliesTimer,150,8250,!0,50);var sw=600,sp=sw+1e3,cs=sw+3e3,pp=sp+5300,pr=pp+675,mp=pr+640,mr=mp+800,wd=mr+1260,bp=mr+2260,br=bp+700,ss=br+2775,ep=ss+2025,e1=ss+800,e2=e1+1700,e3=e2+1300,e4=e3+1300,gf=e4+1500,zm=gf+1700,zb=zm+1500,cutSceneTriggered=!1,soundSprite=new Howl({urls:[filePath+"/feature-assets/walking-dead/sounds/SpriteClip.ogg",filePath+"/feature-assets/walking-dead/sounds/SpriteClip.mp3"],sprite:{schoolbell:[0,4800],barrelroll:[5e3,2e3],cartsqueak:[7300,1100],garagedoor:[9e3,3500],garagedoor2:[9e3,3500],powderhits1:[13e3,1e3],powderhits2:[13e3,1e3],powderhits3:[13e3,1e3],powderhits4:[13e3,1e3],makeupsqk1:[14165,670],makeupsqk2:[15e3,500],makeupsqk3:[14165,670],hangerrack:[15600,1500],bloodsplt1:[17500,500],bloodsplt2:[18e3,500],bloodsplt3:[19e3,2e3],gunclicked:[22e3,700],gunfire:[23e3,2e3],bodyhit:[21500,480],owlhoot:[25e3,2900],walkiet:[28e3,6e3],wellsplash:[34e3,2e3],glassbreak:[36e3,2e3],bubblepops:[38e3,500],crowcawed1:[38500,950],crowcawed2:[39500,1e3],harleyroar:[41e3,1900],crossbowfx:[43e3,5e3]}}),soundsPlayed=new Array(["schoolbell",!1],["barrelroll",!1],["cartsqueak",!1],["garagedoor",!1],["garagedoor2",!1],["powderhits1",!1],["powderhits2",!1],["powderhits3",!1],["powderhits4",!1],["makeupsqk1",!1],["makeupsqk2",!1],["makeupsqk3",!1],["hangerrack",!1],["bloodsplt1",!1],["bloodsplt2",!1],["bloodsplt3",!1],["gunclicked",!1],["gunfire",!1],["bodyhit",!1],["owlhoot",!1],["walkiet",!1],["wellsplash",!1],["glassbreak",!1],["bubblepops",!1],["crowcawed1",!1],["crowcawed2",!1],["harleyroar",!1],["crossbowfx",!1]),loopCrickets=new Howl({urls:[filePath+"/feature-assets/walking-dead/sounds/Crickets.ogg",filePath+"/feature-assets/walking-dead/sounds/Crickets.mp3"],loop:!0}),loopsPlaying=new Array(["loopFlag",!1],["loopCrow",!1],["loopCrickets",!1]);function fadeLoop(e,a,s){currST<a-s||currST>a+s?loopsPlaying[e]&&(e.stop(),loopsPlaying[e]=!1):(loopsPlaying[e]||(e.play(),loopsPlaying[e]=!0),currST<a?e.volume(1-(a-currST)/s):currST>=a&&e.volume(1-(currST-a)/s))}function triggerSound(e,a,s){currST>a&&currST<a+s?soundsPlayed[e]||(soundSprite.play(e),soundsPlayed[e]=!0):soundsPlayed[e]=!1}var mainThemePlaying=!1,mainTheme=new Howl({urls:[filePath+"/feature-assets/walking-dead/sounds/MainTheme.ogg",filePath+"/feature-assets/walking-dead/sounds/MainTheme.mp3"],loop:!0,volume:.8}),endThemePlaying=!1,endTheme2=new Howl({urls:[filePath+"/feature-assets/walking-dead/sounds/EndTheme2.ogg",filePath+"/feature-assets/walking-dead/sounds/EndTheme2.mp3"],loop:!0,volume:.6}),endTheme1=new Howl({urls:[filePath+"/feature-assets/walking-dead/sounds/EndTheme1.ogg",filePath+"/feature-assets/walking-dead/sounds/EndTheme1.mp3"],onend:function(){endTheme2.play()},volume:.6});function setSpriteFrames(e,a,s,i,t){var r=$(e).width(),n=a/r;null==t&&(t=0);for(var d=0;d<n;d++){$(e).attr("data-"+(s+d*i),"background-position[end]:-"+r*d+"px "+t+"px;")}}$("#soundToggle").click((function(){$("#soundToggle").toggleClass("mute"),$("#soundToggle").hasClass("mute")?Howler.mute():Howler.unmute()})),setSpriteFrames("#glass",1440,cs+120,30),setSpriteFrames("#oBarrel",1500,cs+1e3,30),setSpriteFrames("#oCartInner",1500,cs+1700,20,-125),setSpriteFrames("#prosthetics",1740,pp,55),setSpriteFrames("#makeUp",3190,mp,40),setSpriteFrames("#wardrobe",2178,wd,10),setSpriteFrames("#bloodSplatter",5075,bp,20),setSpriteFrames("#rick1",700,ep-1850,20),setSpriteFrames("#rick2",875,gf+120,50),setSpriteFrames("#zomDeath",6e3,gf+120,60);var bubbleTimeArr=new Array;function setBubble(e,a,s,i,t){var r,n;$(e).attr("data-"+a,"display:none;"),$(e).attr("data-"+(a+5),"display:block;"),$(e).hasClass("tlkStatic")?($(e).attr("data-"+(a+10),"transform:scale(.1);margin[sqrt]:70px 0px 0px 0px;"),r=0,n=32):($(e).attr("data-"+(a+10),"transform:scale(.1);margin[sqrt]:70px 0px 0px -220px;"),s=4300,r=15,n=40),bubbleTimeArr.push(a+20),null!=i&&null!=i||(i=0),$(e).attr("data-"+(a+70),"transform:scale("+Number(1.2+i)+");margin[sqrt]:0px 0px 0px 0px;"),$(e).attr("data-"+(a+100),"transform:scale("+Number(1+i)+");margin[sqrt]:0px 0px 0px 0px;"),null==t&&(t=20),setSpriteFrames(e,s,a+105,t);var d=$(e).find("p"),g=$(e).width()-r,o=$(e).height()-n,l=d.width(),p=d.height();d.css({top:(o-p)/2+"px",left:(g-l)/2+"px"})}if(setBubble("#t1",sp-100),setBubble("#t2",sp+250,null,.2,21),setBubble("#t3",sp+1175,null,.2,21),setBubble("#t4",cs+780),setBubble("#t5",cs+1150),setBubble("#t6",pp+100,200),setBubble("#t7",mp+150,200,.2),setBubble("#t8",mr+250),setBubble("#t9",wd-350,null,null,25),setBubble("#t10",bp+50,200,.2),setBubble("#t11",br+1025,null,.2),setBubble("#t12",br+1890,null,.2,22),$(window).height()<850){var reduction=850-$(window).height();$("#Scene1").css({height:$("#Scene1").height()-reduction,"margin-top":($("#Scene1").height()-reduction)/-2}),$("#bg3_fore").css("z-index","500");var frameHeight,borderLimit=70;$(".bFrames").each((function(e){var a=parseInt($(this).css("border-bottom-width").slice(0,-2));a>borderLimit?($(this).css("border-bottom-width",borderLimit+"px"),frameHeight=$(this).height()-reduction+a-borderLimit):frameHeight=$(this).height()-reduction,$(this).css({height:frameHeight})})),$("#bg1").css("top",-reduction/2),$("#bg2").css("top",-reduction/2),$("#bg3").css("top",-reduction/2),$("#bubbles").css("top",-reduction/2),$("#darylTree").css("top",-reduction/2),$("#playBtns").css("top",-reduction/2)}var walkPace,animationCycle,isPaused,howlerInt,howlerVol,zombie=$("#zombieInner"),lastST=$(window).scrollTop(),currST=lastST,pixelLocations=[0,-250,-500,-750,-1e3,-1250,-1500],nextSprite=1,prevSprite=pixelLocations.length-1;$(".hideGuts").each((function(e){$(this).click((function(e){$(this).parent().toggleClass("expand")}))}));var changeHVol=function(e){1==e&&howlerVol>=1?(clearInterval(howlerInt),Howler.volume(1)):-1==e&&howlerVol<=0?(clearInterval(howlerInt),Howler.volume(0)):(howlerVol+=.1*e,Howler.volume(howlerVol))},videoArr=new Array(["KPmFfI2_m2Q"],["_OCiRvprnvk"],["iVHoO2Jd9iM"],["4Xo84Z4uUdo"],["zoJqZV8jZjE"],["RgXrn5UVayo"],["kRM0fCC_jKU"],["IoJW1hs967I","&autoplay=1#t=5"],["wAKTewlDdco","&autoplay=1#t=5"],["qAvvv6oXQYk"],["2s02Kh2BxJk","&autoplay=0#t=37"],["W0Y8voOYaDY","&autoplay=0#t=50"],["3qu8WzYeYpQ"]);function setVideo(e){var a;$("#soundToggle").hasClass("mute")||(howlerVol=1,howlerInt=setInterval((function(){changeHVol(-1)}),100)),a=null==videoArr[e][1]||null==videoArr[e][1]?"&autoplay=1":videoArr[e][1],$("#vmPlayer").html('<iframe width="560" height="315" src="https://www.youtube.com/embed/'+videoArr[e][0]+"?rel=0&iv_load_policy=3"+a+'" frameborder="0"></iframe>'),$("#videoModal").fadeIn("slow")}$("#vmBlackBack").click((function(e){$("#videoModal").fadeOut(1500),$("#vmPlayer").html(""),$("#soundToggle").hasClass("mute")||(howlerVol=0,howlerInt=setInterval((function(){changeHVol(1)}),100))}));for(var i=0;i<videoArr.length;i++)$("#playIcons").append('\n<div id="pi'+(i+1)+'"></div>'),$("#playBtns").append('\n<div id="pb'+(i+1)+'">PLAY VIDEO</div>');$("#playBtns > div").each((function(e){$(this).css({top:$("#pi"+(e+1)).css("top"),left:$("#pi"+(e+1)).css("left")}),$(this).click((function(a){setVideo(e)})),$(this).mouseover((function(){$("#pi"+(e+1)).toggleClass("playIconsZoom"),soundSprite.play("gunclicked")})),$(this).mouseout((function(){$("#pi"+(e+1)).toggleClass("playIconsZoom")}))})),$("#pi1").attr("data-"+(cs+110),"display[begin]:none;").attr("data-"+(cs+120),"display[end]:block;top:445px;").attr("data-"+(cs+280),"top:610px;").attr("data-"+(cs+350),"top:590px;"),$("#pb1").attr("data-"+(cs+110),"display[begin]:none;").attr("data-"+(cs+120),"display[end]:block;top:445px;").attr("data-"+(cs+280),"top:610px;").attr("data-"+(cs+350),"top:590px;"),$("#pi2").attr("data-"+(cs+1e3),"display[begin]:none;").attr("data-"+(cs+1140),"display[end]:block;"),$("#pi3").attr("data-"+(pp-10),"opacity:0;").attr("data-"+(pp+100),"opacity:1;").attr("data-"+(pr-10),"opacity:1;").attr("data-"+(pr+100),"opacity:0;"),setSpriteFrames("#insideCabinet",1e3,mr+120,10),$("#pi5").attr("data-"+(cs+1e3),"display[begin]:none;").attr("data-"+(cs+1140),"display[end]:block;").attr("data-"+(mr+220),"opacity:0;").attr("data-"+(mr+280),"opacity:1;"),$("#pi7").attr("data-"+(bp-10),"opacity:0;").attr("data-"+(bp+100),"opacity:1;").attr("data-"+(br-10),"opacity:1;").attr("data-"+(br+100),"opacity:0;"),$("#pi10").attr("data-"+(e1-600),"opacity:0;").attr("data-"+(e1-400),"opacity:1;").css({display:"none"}),$("#pb10").html(""),$("#bfp4_5").click((function(e){setVideo(7)})),$("#bfp5_7").click((function(e){setVideo(10)})),$("#bfp5_8").click((function(e){setVideo(11)})),$("#bfp5_9").click((function(e){setVideo(8)}));var imgFW=8500,imgParts=10,imgW=imgFW/imgParts-1;for(i=1;i<=imgParts;i++)background=filePath+"/dist/images/pages/generic/features/walking-dead/bgP"+i+".jpg",$("#bg1").append('<div style="background:url('+background+");width:"+imgW+"px;left:"+(i-1)*imgW+'px;"></div>');$("#musicMute").click((function(e){mainThemePlaying&&!cutSceneTriggered?(mainTheme.pause(),mainThemePlaying=!1):mainThemePlaying||cutSceneTriggered?endThemePlaying?(endTheme2.pause(),endThemePlaying=!1):endThemePlaying||(endTheme2.play(),endThemePlaying=!0):(mainTheme.play(),mainThemePlaying=!0)})),$("#cabinetTrigger").click((function(e){$("#blackframe").toggleClass("hide")})),$("#wtTrigger").click((function(e){soundSprite.play("walkiet")}));var altEnd=!1;function altEnding(){soundSprite.play("harleyroar"),altEnd=!0,$("#vmPlayer").css("background","none").html("<span>Alternate<br /> Ending<br /> Activated</span>"),$("#videoModal").fadeIn("slow"),setTimeout((function(){$("#videoModal").fadeOut("slow")}),1500),setTimeout((function(){$("#vmPlayer").css("background","#000").html("")}),2500),$("#rick1").addClass("daryl"),$("#rick2").addClass("daryl"),$("#endFrame2").addClass("daryl"),$("#endFrame4").addClass("daryl"),$("#zomDeath").addClass("daryl")}$("#darylTree .ee").click((function(e){altEnd||altEnding()}));var kkeys=[],zombieGuts2="48,48";$(document).keydown((function(e){kkeys.push(e.keyCode),kkeys.toString().indexOf(zombieGuts2)>=0&&($(document).unbind("keydown",arguments.callee),cutSceneTriggered=!0)})),initPreloader();